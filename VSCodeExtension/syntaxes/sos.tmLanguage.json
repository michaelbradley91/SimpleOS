{
	"scopeName": "source.sos",
	"fileTypes": [
		"sos"
	],
	"name": "sos",
	"patterns": [
		{
			"include": "#code"
		}
	],
	"repository": {
		"code": {
			"patterns": [
				{ "include": "#command" },
				{ "include": "#function-definition" },
				{ "include": "#definition" },
				{ "include": "#do-include" },
				{ "include": "#comment-block" },
				{ "include": "#comment-line" },
				{ "include": "#line-escape"}
			]
		},
		"command": {
			"patterns": [
				{ "include": "#operator" },
				{ "include": "#functions" },
				{ "include": "#literal" },
				{ "include": "#string" },
				{ "include": "#comment-line" },
				{ "include": "#comment-block" }
			]
		},
		"comment-block": {
			"begin": "/\\*",
			"end": "\\*/",
			"name": "comment.block.sos"
		},
		"comment-line": {
			"match": "(//).*$\\n?",
			"name": "comment.line.double-slash.sos"
		},
		"operator": {
			"match": "(?i)(nop|store|copy|add|mul|sub|div|mod|neq|eq|lt|gt|lte|gte|jmp|xor|or|and|not|fill|draw|clear|play_music|stop_music|play_sound|get_event|wait|exit|get_mouse)[\\s]+",
			"name": "keyword.control.sos"
		},
		"functions": {
			"match": "(?i)(music|sound|sprite|colour|rect|key_pressed|key_released|mouse_pressed|mouse_released)(?:\\()",
			"captures": {
				"1": {
					"name": "entity.name.function.sos"
				}
			}
		},
		"definition": {
			"match": "(#define)\\s+([^ \\(\\)]+)",
			"name": "definition.sos",
			"captures": {
				"1": {
					"name": "keyword.control.directive.define.sos"
				},
				"2": {
					"name": "entity.name.function.preprocessor.sos"
				}
			}
		},
		"function-definition": {
			"match": "(#define)\\s+([^ ]+)\\((.+)\\)",
			"name": "function.sos",
			"captures": {
				"1": {
					"name": "keyword.control.directive.define.sos"
				},
				"2": {
					"name": "entity.name.function.preprocessor.sos"
				},
				"3": {
					"name": "function.arguments",
					"patterns": [
						{ "include": "#arguments-list" }
					]
				}
			}
		},
		"do-include": {
			"match": "(#include)\\s+(\".+\")",
			"name": "include",
			"captures": {
				"1": {
					"name": "keyword.control.directive.include.sos"
				},
				"2": {
					"patterns": [
						{ "include": "#string" }
					]
				}
			}
		},
		"string": {
			"match": "\".+\"",
			"name": "string.quoted.double.sos"
		},
		"literal": {
			"name": "literal.sos",
			"patterns": [
				{
					"include": "#numeric-literal"
				}
			]
		},
		"line-escape": {
			"match": "[\\\\]",
			"name": "constant.character.escape.line-continuation"
		},
		"arguments": {
			"match": "[^,]*",
			"name": "variable.parameter.preprocessor.sos"
		},
		"commas": {
			"match": ",",
			"name": "punctuation.separator.delimiter.sos"
		},
		"numeric-literal": {
			"match": "\\s*(?<=[^$])((0(x|X)[0-9a-fA-F]+)|([0-9]+))",
			"name": "constant.numeric.sos"
		},
		"arguments-list": {
			"begin": "\\(",
			"beginCaptures": {
				"0": {
					"name": "punctuation.paren.open.sos"
				}
			},
			"end": "\\)",
			"endCaptures": {
				"0": {
					"name": "punctuation.paren.close.sos"
				}
			},
			"name": "function",
			"contentName": "function.arguments.sos",
			"patterns": [
				{ "include": "#arguments" },
				{ "include": "#commas" }
			]
		}
	}
}